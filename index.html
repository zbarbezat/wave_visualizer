<!DOCTYPE html>
<html>
    <head>
            <link rel="stylesheet" type="text/css" href="style.css">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> <!--JQuery-->
    </head>
    <body onload="init()">
        <h1>Waveform Visualizer</h1>
        <div id="content">
            <div id="piano">
                <div class="keys">
                        <div class="key" data-key="0" id="261.63"></div> <!--C-->
                        <div class="key non" data-key="1" id="277.18"></div> <!--C#/Db-->
                        <div class="key" data-key="2" id="293.66"></div> <!--D-->
                        <div class="key non" data-key="3" id="311.13"></div> <!--D#/Eb-->
                        <div class="key" data-key="4" id="329.63"></div> <!--E-->
                        <div class="key" data-key="5" id="349.23"></div> <!--F-->
                        <div class="key non" data-key="6" id="369.99"></div> <!--F#/Gb-->
                        <div class="key" data-key="7" id="392.00"></div> <!--G-->
                        <div class="key non" data-key="8" id="415.30"></div> <!--G#/Ab-->
                        <div class="key" data-key="9" id="440.00"></div> <!--A-->
                        <div class="key non" data-key="10" id="466.16"></div> <!--A#/Bb-->
                        <div class="key" data-key="11" id="493.88"></div> <!--B-->
                </div>
            </div>
            <div id="waveforms">
                <canvas id="myCanvas" width="350" height="350" style="border:4px solid #000000;"></canvas>
            </div>
        </div>
    </body>
    <script>
        var existingFrequencies = []; // global variable containing previously clicked buttons
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var step = 60;

        $(".key").on("click", (function(event) {
            var canvas = document.getElementById("myCanvas");
            console.log("this jawn was clicked.");
            $(this).addClass('clicked');
            frequency = $(this)[0].id;
            console.log(frequency);
            plotSine(frequency);
        }));

        function showAxes(ctx,axes) {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            var width = ctx.canvas.width;
            var height = ctx.canvas.height;
            var xMin = 0;
            
            ctx.beginPath();
            ctx.strokeStyle = "rgb(0,0,0)";
            
            // X-Axis
            ctx.moveTo(xMin, height/2);
            ctx.lineTo(width, height/2);
            
            // Y-Axis
            ctx.moveTo(width/2, 0);
            ctx.lineTo(width/2, height);

            // Starting line
            ctx.moveTo(0, 0);
            ctx.lineTo(0, height);
            
            ctx.stroke();
        }

        function plotSine(frequency) {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, 500, 500);
            showAxes();
            var width = ctx.canvas.width;
            var height = ctx.canvas.height;
            var scale = 10;

            ctx.beginPath();
            ctx.lineWidth = 2;
            ctx.strokeStyle = "rgb(66,44,255)";
            
            var amplitude = 10;

            x = 0;
            while (x < width) {
                y = height/2 + amplitude * Math.sin(frequency * x);
                ctx.lineTo(x, y);
                x++;
            }
            ctx.stroke();
        }

        function init() {
            showAxes();
        }
    </script>
</html>